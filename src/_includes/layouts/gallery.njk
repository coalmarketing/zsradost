{% extends "layouts/base.njk" %}

{% block head %}
  <script defer src="/assets/js/fslightbox.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
{% endblock %}

{% block body %}
  {% include "components/landing.njk" %}

  
  <!-- GALLERY -->
  <article class="~px-4/8 py-24">
    <div class="container m-auto flex flex-col gap-10 bg-purple/15 ~p-6/10 rounded-3xl">
      <section>
        <div class="px-6 py-1 bg-purple mb-2 rounded-full w-fit text-white font-bold">Fotografií</div>
        <h2 class="mb-8 text-purple ~text-5xl/6xl font-bold">Další momenty</h2>


        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-2">
          {% for image in images %}
            <a data-fslightbox="{{ page.fileSlug }}" href="{% getUrl image.url | rotate | resize({ height: 1944 }) | webp({ quality: 70 }) %}">
              <picture>
                <source srcset="{% getUrl image.url | rotate | resize({ width: 800, height: 800 }) | webp({ quality: 70 }) %}" type="image/webp">
                <img class="object-cover w-full aspect-square rounded-xl" src="{% getUrl image.url | rotate | resize({ width: 800, height: 800 }) | jpeg({ quality: 70 }) %}" alt="{% if image.alt -%}{{ image.alt }}{%- else -%}Fotografie {{ title }} - {{ loop.index }}{%- endif %}" loading="lazy" decoding="async" draggable="false"/>
              </picture>
            </a>
          {% endfor %}
        </div>
      </section>
    </div>
  </article>



  <!-- SWIPER -->
  <section class="pb-16 ~px-4/8">
    <div class="container bg-purple/15 m-auto ~p-6/10 rounded-3xl items-center gap-10 xl:gap-16">
      <div class="px-6 py-1 bg-purple mb-2 rounded-full w-fit text-white font-bold">Fotogelerie</div>
      <h2 class="mb-8 text-purple ~text-5xl/6xl font-bold">Další událostí</h2>

      <!-- Swiper container -->
      <div class="inspiration-swiper-container relative mx-auto w-[calc(100%-94px)]">
        <div class="w-full swiper inspiration-swiper">
          <div class="swiper-wrapper w-full h-full">
             {% for album in collections.gallery | reverse %}
              {% if album.data.images | length > 0 %}
                {% set coverImage = (album.data.cover or (album.data.images[0] and album.data.images[0].url) ) %}
                <div class="swiper-slide !h-auto">
                  <article class="group bg-white rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300 transform p-4">
                    <div class="relative rounded-xl overflow-hidden">
                      <a href="{{ album.url }}" class="block">
                        {% if coverImage %}
                          <picture>
                            <source srcset="{% getUrl coverImage | resize({ width: 960, height: 560 }) | webp({ quality: 70 }) %}" type="image/webp">
                            <img class="w-full h-56 rounded-xl object-cover transition-transform duration-500 group-hover:scale-110" src="{% getUrl coverImage | resize({ width: 960, height: 560 }) | jpeg({ quality: 70 }) %}" alt="{{ album.data.title }}" loading="lazy" decoding="async" draggable="false"/>
                          </picture>
                        {% else %}
                          <div class="w-full h-56 bg-zinc-100"></div>
                        {% endif %}
                      </a>

                      <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

                      <div class="absolute inset-0 flex items-center justify-center px-4 text-white text-center opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                        <a href="{{ album.url }}" class="group relative w-fit inline-flex items-center px-4 py-2 rounded-full font-bold text-purple bg-white overflow-hidden transition-colors duration-300">
                          <span class="pointer-events-none absolute -left-10 inset-0 -skew-x-[10deg] scale-x-0 origin-left bg-purple transition-transform duration-500 ease-out group-hover:scale-x-[1.2]"></span>
                          <div class="relative z-10 flex items-center">
                            <span class="transition-colors duration-300 group-hover:text-white">Více obrázků</span>
                          </div>
                        </a>
                      </div>
                    </div>

                    <h3 class="text-xl font-bold text-zinc-900 mt-3 mb-2">{{ album.data.title }}</h3>
                    <p class="text-zinc-700 mb-4 line-clamp-3">{{ album.data.description or '' }}</p>
                  </article>
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <!-- Pagination -->
          <div class="swiper-pagination !relative mt-4"></div>
        </div>

        <div class="swiper-button-prev absolute top-1/2 -translate-y-1/2 z-10 !text-purple"></div>
        <div class="swiper-button-next absolute top-1/2 -translate-y-1/2 z-10 !text-purple"></div>
      </div>

      <!-- MORE BTN -->
      <div class="w-full flex justify-center mt-8">
      <a href="/fotogalerie" class="group relative w-fit hidden lg:inline-flex items-center px-8 py-2 rounded-full font-bold text-purple bg-white overflow-hidden transition-colors duration-300">
        <span class="pointer-events-none absolute -left-10 inset-0 -skew-x-[10deg] scale-x-0 origin-left bg-purple transition-transform duration-500 ease-out group-hover:scale-x-[1.2]"></span>

        <div class="relative z-10 flex items-center">
          <span class="text-xl md:text-2xl transition-colors duration-300 group-hover:text-white">
            Více fotografií
          </span>
        </div>
      </a>
      </div>
    </div>
  </section>


  {% include "components/cta.njk" %}
  {% include "components/partners.njk" %}


  <!-- Swiper JS (CDN) + init script -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script>
    (function(){
      if(typeof Swiper === 'undefined') return;

      new Swiper('.inspiration-swiper', {
        slidesPerView: 1,
        spaceBetween: 16,
        pagination: {
          el: '.swiper-pagination',
          clickable: true
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev'
        },
        breakpoints: {
          640: { slidesPerView: 1.2 },
          768: { slidesPerView: 2 },
          1024: { slidesPerView: 3 }
        }
      });
    })();
  </script>
{% endblock %}
