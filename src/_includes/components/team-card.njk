{#
  team-card.njk
  Macro to render a team member card/article.
  Usage: {% from "components/team-card.njk" import teamCard %}
         {{ teamCard(member, { color: 'green', btnText: 'Více o mně' }) }}
#}
{% macro teamCard(member, opts = {}) %}
  {% set color = opts.color or 'green' %}
  {% set btnText = opts.btnText or 'Více o mně' %}
  {% set image = member.data.image %}
  {% set imageAlt = member.data.imageAlt or member.data.name %}
  {% set role = member.data.role %}
  {% set name = member.data.name %}
  {% set slugFromUrl = (member.data.url | default('')) | replace(' ', '-') | lower %}

  <article class="group bg-white rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300 transform p-6 flex flex-col h-full">
    <div class="relative rounded-xl overflow-hidden group">
      <picture>
        <source media="(max-width: 600px)" srcset="{% getUrl image | resize({ width: 373, height: 497 }) | webp({ quality: 70 }) %}" type="image/webp">
        <source media="(min-width: 601px)" srcset="{% getUrl image | resize({ width: 373, height: 497 }) | webp({ quality: 70 }) %}" type="image/webp">
        <img
          class="w-full h-full rounded-xl object-cover transition-transform duration-500 group-hover:scale-110"
          src="{% getUrl image | resize({ width: 373, height: 497 }) | webp({ quality: 70 }) %}"
          alt="{{ imageAlt }}"
          decoding="async"
          loading="lazy"
          draggable="false"
        />
      </picture>

      <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

      <a href="/team/{{ slugFromUrl }}" class="absolute inset-0 flex flex-col items-center justify-center px-4 text-white text-center opacity-0 group-hover:opacity-100 transition-opacity duration-500">
        <h4 class="text-xl font-bold mb-2">{{ name }}</h4>
        {% if member.data.bio %}
          <p class="text-sm mb-2">{{ member.data.bio }}</p>
        {% endif %}

        <div class="mt-2 group relative w-fit inline-flex items-center px-4 py-2 rounded-full font-bold text-{{ color }} bg-white overflow-hidden transition-colors duration-300">
          <span class="pointer-events-none absolute -left-10 inset-0 -skew-x-[10deg] scale-x-0 origin-left bg-{{ color }} transition-transform duration-500 ease-out group-hover:scale-x-[1.2]"></span>

          <div class="relative z-10 flex items-center">
            <span class="transition-colors duration-300 group-hover:text-white">{{ btnText }}</span>
          </div>
        </div>
      </a>
    </div>

    <h3 class="text-2xl font-bold text-{{ color }} mt-3 mb-1 text-center">{{ name }}</h3>
    <p class="text-lg text-zinc-800 text-center grow">{{ role }}</p>
  </article>

{% endmacro %}
